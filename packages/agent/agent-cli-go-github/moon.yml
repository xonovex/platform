$schema: https://moonrepo.dev/schemas/project.json
tasks:
  build:
    script: bash scripts/build-archives.sh "$workspaceRoot/packages/agent" "$projectRoot/release-assets"
    deps:
      - agent-cli-go-darwin-arm64:go-build
      - agent-cli-go-darwin-x64:go-build
      - agent-cli-go-linux-arm64:go-build
      - agent-cli-go-linux-x64:go-build
      - agent-cli-go-win32-x64:go-build
    inputs: []
    outputs:
      - release-assets/
    options:
      cache: true
  github-publish:
    script: bash scripts/github-release.sh "$workspaceRoot/packages/agent/agent-cli-go" "$projectRoot/release-assets"
    deps:
      - build
    options:
      cache: false
  ci-publish:
    command: echo 'ci-publish complete'
    deps:
      - github-publish
    options:
      cache: false
  ci-publish-dry-run:
    command: echo 'ci-publish-dry-run complete'
    options:
      cache: false
language: bash
dependsOn: []
layer: unknown
